/*
	formathtml.js v1.0.1
	Build: Thomas Digby
	Date: 13/03/2015
*/
function formatHtml(a,b){function c(a){l(b);for(var c=d(a),e="",f="",g=0;g<c.length;g++){var o=c[g],p=c[g-1];g>0&&(!h(p)||i(p)||k(p)||j(p)||(e+=m(n.indentCharacter,n.indentCharacterCount)),i(o)&&(e=e.slice(0,-n.indentCharacterCount))),f+=e+o+"\n"}return f.trim()}function d(a){var b=e(a),c=f(b),d=g(c),h=d.split("\n");return h.filter(function(a){return""!==a})}function e(a){var b={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>''\/]/g,function(a){return b[a]})}function f(a){var b=a.replace(/\t/g,"").replace(/\n/g,"").replace(/=""/g,"").replace(/\&#62;[\s]+\&#60;/g,"&#62;&#60;");return b}function g(a){var b=a.replace(/(?!&#62;)(?!\n)&#60;/g,"\n&#60;").replace(/&#62;(?!&#60;)(?!\n)/g,"&#62;\n");return b}function h(a){return"&#60;"===a.substring(0,5)}function i(a){return"&#47;"===a.substring(5,10)}function j(a){for(var b=["br","input","link","meta","!doctype","basefont","base","area","source","hr","wbr","param","img","isindex","embed"],c=!1,d=0;d<b.length;d++){var e=new RegExp("&#60;\\b"+b[d]+"\\b");if(a.match(e)){c=!0;break}}return c}function k(a){return"&#60;!--"===a.substring(0,8)}function l(a){for(var b in a)a.hasOwnProperty(b)&&(n[b]=a[b])}function m(a,b){return new Array(b+1).join(a)}var n={indentCharacterCount:1,indentCharacter:"	"};return c(a)}